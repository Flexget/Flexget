{% extends "layout.html" %}

{% block main %}
    {# TODO: maybe a bad idea to include css this way #}

    <style type="text/css">
    table.history {
        width: 100%;
        background: #DDDDDD;
        margin-bottom: 0.5em;
    }
    table.history td.title {
        width: 5em;
    }
    table.history td.heading {

    }
    </style>

    <h2>History</h2>

    <p>List 50 latest entries that FlexGet has processed.</p>

    {% if items %}
        {% for item in items %}
            <table class="history">
            <tr>
                <td class="heading title">Title</td>
                <td class="heading"><a href="{{ item.url }}">{{ item.title }}</a></td>
            </tr><tr>
                <td>Task</td>
                <td>{{ item.task }}</td>
            </tr>
            {% if item.filename %}
            <tr>
                <td>Filename</td>
                <td>{{ item.filename }}</td>
            </tr>
            {% endif %}
            <tr>
                <td>Time</td>
                <td>{{ item.time.strftime("%c") }}</td>
            </tr><tr>
                <td>Details</td>
                <td>{{ item.details }}</td>
            </tr>
            </table>
        {% endfor %}
    {% else %}
        <p>No history catalogued.</p>
    {% endif %}

{% endblock %}
